var Game;(function(n){var t=function(){function t(n){this._worldX=n.worldX,this._worldY=n.worldY}return t.prototype.setGameBoard=function(n){this._gameBoard=n},t.prototype.canMove=function(){return!1},t.prototype.getKineticGroup=function(){return this._group=new Kinetic.Group({x:this._worldX,y:this._worldY}),this._group},t.prototype.setParentLayer=function(n){this._parentLayer=n},t.prototype.draw=function(){if(!this._parentLayer)throw new Error("_parentLayer is null. Must call setParentLayer first.");this._parentLayer.draw()},t.prototype.move=function(n,t,i){if(this._group==undefined)throw new Error("moveTo() _group undefined. Did you forget to call 'super.getKineticGroup()' in the overloaded getKineticGroup() method?");if(i.pixelsPerSecond){var r=Math.abs(this._group.getX()-n),u=Math.abs(this._group.getY()-t),f=Math.sqrt(r*r+u*u),e=f/i.pixelsPerSecond;this._group.transitionTo({x:n,y:t,duration:e})}else this._group.move(r,u),this.draw()},t.prototype.addImage=function(n){if(!this._group)throw new Error("_group must be defined before calling addImage.");var i=this,t={};return t.imageObj=new Image,t.KineticImage=new Kinetic.Image({image:t.imageObj,width:n.width,height:n.height}),t.imageObj.onload=function(){i._group.add(t.KineticImage),i.draw(),n.onLoadPostDraw&&n.onLoadPostDraw()},t.imageObj.src=n.url,t},t.prototype.tick=function(){this._worldX=this._group.getX(),this._worldY=this._group.getY()},t.prototype.findEntities=function(t){for(var u=[],e=this._gameBoard.entities.length,i,f,r=0;r<e;r++)(i=this._gameBoard.entities[r],i!==this)&&(f=n.Utilities.distanceBetweenPoints(this._worldX,this._worldY,i._worldX,i._worldY),f<t&&u.push(i));return u},t}();n.Entity=t})(Game||(Game={}))